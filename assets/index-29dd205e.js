import{c as B,g as Y,r as p,R as pt,b as U,a as s,j as _,q as Tt}from"./index-88b39a02.js";function yt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var st=yt,jt=typeof B=="object"&&B&&B.Object===Object&&B,wt=jt,St=wt,$t=typeof self=="object"&&self&&self.Object===Object&&self,Nt=St||$t||Function("return this")(),at=Nt,xt=at,Ot=function(){return xt.Date.now()},kt=Ot,Et=/\s/;function It(t){for(var e=t.length;e--&&Et.test(t.charAt(e)););return e}var Pt=It,Ct=Pt,At=/^\s+/;function Gt(t){return t&&t.slice(0,Ct(t)+1).replace(At,"")}var Mt=Gt,Rt=at,Bt=Rt.Symbol,ct=Bt,Q=ct,lt=Object.prototype,Ft=lt.hasOwnProperty,Lt=lt.toString,I=Q?Q.toStringTag:void 0;function Wt(t){var e=Ft.call(t,I),n=t[I];try{t[I]=void 0;var o=!0}catch{}var r=Lt.call(t);return o&&(e?t[I]=n:delete t[I]),r}var Xt=Wt,Kt=Object.prototype,qt=Kt.toString;function Dt(t){return qt.call(t)}var Ut=Dt,Z=ct,Ht=Xt,zt=Ut,Yt="[object Null]",Jt="[object Undefined]",V=Z?Z.toStringTag:void 0;function Qt(t){return t==null?t===void 0?Jt:Yt:V&&V in Object(t)?Ht(t):zt(t)}var Zt=Qt;function Vt(t){return t!=null&&typeof t=="object"}var te=Vt,ee=Zt,ne=te,oe="[object Symbol]";function re(t){return typeof t=="symbol"||ne(t)&&ee(t)==oe}var ie=re,se=Mt,tt=st,ae=ie,et=0/0,ce=/^[-+]0x[0-9a-f]+$/i,le=/^0b[01]+$/i,ue=/^0o[0-7]+$/i,fe=parseInt;function de(t){if(typeof t=="number")return t;if(ae(t))return et;if(tt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=tt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=se(t);var n=le.test(t);return n||ue.test(t)?fe(t.slice(2),n?2:8):ce.test(t)?et:+t}var me=de,ve=st,K=kt,nt=me,be="Expected a function",he=Math.max,ge=Math.min;function _e(t,e,n){var o,r,i,a,c,u,m=0,S=!1,v=!1,d=!0;if(typeof t!="function")throw new TypeError(be);e=nt(e)||0,ve(n)&&(S=!!n.leading,v="maxWait"in n,i=v?he(nt(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d);function $(l){var b=o,T=r;return o=r=void 0,m=l,a=t.apply(T,b),a}function A(l){return m=l,c=setTimeout(w,e),S?$(l):a}function X(l){var b=l-u,T=l-m,R=e-b;return v?ge(R,i-T):R}function G(l){var b=l-u,T=l-m;return u===void 0||b>=e||b<0||v&&T>=i}function w(){var l=K();if(G(l))return k(l);c=setTimeout(w,X(l))}function k(l){return c=void 0,d&&o?$(l):(o=r=void 0,a)}function M(){c!==void 0&&clearTimeout(c),m=0,o=u=r=c=void 0}function N(){return c===void 0?a:k(K())}function j(){var l=K(),b=G(l);if(o=arguments,r=this,u=l,b){if(c===void 0)return A(u);if(v)return clearTimeout(c),c=setTimeout(w,e),$(u)}return c===void 0&&(c=setTimeout(w,e)),a}return j.cancel=M,j.flush=N,j}var pe=_e;const Te=Y(pe);var H=globalThis&&globalThis.__assign||function(){return H=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},H.apply(this,arguments)},ye=function(t,e,n){return Te(t,e,H({leading:!0,trailing:!1},n||{}))};function z(t,e,n){e===void 0&&(e=1e3);var o=p.useRef(t);o.current=t;var r=p.useMemo(function(){return ye(function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return o.current.apply(o,i)},e,n)},[]);return p.useEffect(function(){return function(){r.cancel()}},[]),r}function je(t,e,n){return n===void 0&&(n=!0),z(t,e,n?{leading:!0,trailing:!1}:{leading:!1,trailing:!0})}var ut={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var a=typeof i;if(a==="string"||a==="number")o.push(this&&this[i]||i);else if(Array.isArray(i))o.push(n.apply(this,i));else if(a==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){o.push(i.toString());continue}for(var c in i)e.call(i,c)&&i[c]&&o.push(this&&this[c]||c)}}}return o.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ut);var we=ut.exports;const Se=Y(we);function $e(t){return new Promise(function(e){window.setTimeout(e,t)})}function Ne(t,e){var n,o=e||"出错了，请稍候重试";if(t!=null&&t.isAxiosError){var r=(n=t==null?void 0:t.response)===null||n===void 0?void 0:n.data;return(r==null?void 0:r.message)||(r==null?void 0:r.msg)||o}return t!=null&&t.errorFields?(t==null?void 0:t.message)||"请验证表单项是否输入正确":(t==null?void 0:t.message)||(t==null?void 0:t.msg)||o}var ft={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var a=typeof i;if(a==="string"||a==="number")o.push(i);else if(Array.isArray(i)){if(i.length){var c=n.apply(null,i);c&&o.push(c)}}else if(a==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){o.push(i.toString());continue}for(var u in i)e.call(i,u)&&i[u]&&o.push(u)}}}return o.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ft);var xe=ft.exports;const g=Y(xe),Oe=()=>null;class dt extends pt.PureComponent{render(){const{children:e=null,onDestroy:n=Oe}=this.props;return typeof e=="function"?e(n):e}}const ke=()=>null;function mt(){return document?document.createElement("div"):null}function x(t){const e=p.useRef(null);return e.current||(e.current=mt()),p.useEffect(()=>{const n=document.body;return n&&e.current&&n.appendChild(e.current),()=>{e.current&&(e.current.remove&&e.current.remove(),e.current=null)}},[]),e.current?U.createPortal(s(dt,{...t}),e.current):null}x.show=t=>{t=t||{},t.children=t.content;let e=mt();const n=t.rootId?document.getElementById(t.rootId):document.body,o=()=>{if(typeof t.onDestroy=="function"&&t.onDestroy(),e){U.unmountComponentAtNode(e);try{e.remove&&e.remove()}catch(r){console.error("portal remove error",r)}}e=null};return!e||!n||U.render(s(dt,{...t,onDestroy:o}),n.appendChild(e)),o};const vt=t=>()=>{let e=null;const n=()=>{typeof e=="function"&&(e(),e=null)};return{show:r=>{n(),e=t(r||{})},destroy:n}};x.create=vt(x.show);function bt(t,e={}){function n(o){return s(x,{onDestroy:o.onDestroy||ke,children:r=>s(t,{onDestroy:r,...o})})}return n.show=o=>(o=Object.assign({},e,o),o.children=o.children||o.content,x.show({onDestroy:o.onDestroy,content:r=>s(t,{...o,onDestroy:r})})),n.create=vt(n.show),n}const F="g-popup",Ee=()=>null,Ie={};function ht({onDestroy:t,wrapperClassName:e="",className:n="",mask:o=!0,maskClosable:r=!1,children:i=null,nonePointerEvents:a,style:c=Ie}){return _("div",{className:g(F,e,{[`${F}-pass`]:a}),children:[!!o&&s("div",{className:g(`${F}-mask`),onClick:r?t:Ee}),s("div",{className:g(`${F}-inner`,n),style:c,children:typeof i=="function"?i(t):i})]})}const Pe=bt(ht);const L="g-toast";let W,gt;const ot=()=>{W&&(clearTimeout(gt),W(),W=null)};function O({message:t,wait:e=3e3,mask:n=!1,position:o="center",autoBreakLine:r=!0}){ot();const i=r?"":`${L}-msg-nowrap`,a=Pe.show({mask:n,nonePointerEvents:!0,wrapperClassName:`${L}-wrapper`,className:g(L,o==="top"&&`${L}-top`),content:()=>typeof t=="string"?s("p",{className:i,children:t}):Array.isArray(t)?t.map((c,u)=>s("p",{className:i,children:c},u)):t||null});return gt=setTimeout(a,e),W=a,ot}O.info=t=>O({message:t});O.error=(t,e)=>O({message:Ne(t)||e||"出错了"});const q={INFO_OK_TEXT:"我知道了",OK_TEXT:"确定",CANCEL_TEXT:"取消"},C={info:"info",confirm:"confirm",warning:"warning",halfScreen:"half-screen"},Ce=(t,e,n)=>{let o,r;return t===C.info?o=q.INFO_OK_TEXT:(t===C.confirm||t===C.warning)&&(o=q.OK_TEXT,r=q.CANCEL_TEXT),o=e||o,r=n||r,[o,r]};const Ae=p.memo(({className:t})=>s("div",{className:g("g-icon-warning",t)}));const h="g-base-modal",D="g-half-screen-modal";function Ge({className:t,title:e,visible:n,okText:o,cancelText:r,type:i="info",disabled:a,debounceWait:c,debounceImmediate:u=!0,children:m,onOk:S,onCancel:v,onDestroy:d,mask:$=!0,maskClosable:A,wrapperClassName:X,nonePointerEvents:G,icon:w}){const[k,M]=p.useState(!1),[N,j]=p.useMemo(()=>Ce(i,o,r),[i,o,r]),l=N||j,b=i===C.warning,T=i===C.halfScreen,R=je(async()=>{if(k||a)return;const E=S==null?void 0:S();E!=null&&E.then&&typeof E.then=="function"&&(M(!0),await E,M(!1)),d==null||d()},c,u),J=p.useCallback(()=>{v==null||v(),d==null||d()},[v,d]);return n?_(ht,{wrapperClassName:g(h,X,T&&D),mask:$,maskClosable:A,onDestroy:d,nonePointerEvents:G,children:[!!$&&!!T&&!!A&&s("div",{className:g(`${D}-mask`),onClick:J}),_("div",{className:g(`${h}-wrapper`,t,T&&`${D}-wrapper`),children:[_("div",{className:g(`${h}-body`),children:[!!b&&s(Ae,{}),!!w&&w,!!e&&s("div",{className:`${h}-title`,children:e}),!!m&&s("div",{className:`${h}-content`,children:typeof m=="function"?m(d):m})]}),!!l&&_("div",{className:`${h}-bottom`,children:[!!j&&s("div",{className:`${h}-cancel`,onClick:J,children:j}),!!N&&!!j&&s("span",{className:`${h}-split-line`}),!!N&&s("div",{className:g(`${h}-ok`,(k||a)&&`${h}-ok-no-operate`),onClick:R,children:N})]})]})]}):null}const Me=p.memo(Ge),y=bt(Me,{visible:!0});y.confirm=t=>y.show({...t,type:"confirm"});y.custom=t=>y.show({...t,type:"custom"});y.halfScreen=t=>y.show({...t,type:"half-screen"});y.showAsync=t=>new Promise(e=>{y.show({...t,onOk:()=>e(!0),onCancel:()=>e(!1)})});function Re(t,e){return{get:()=>{try{return window.localStorage.getItem(t)??e}catch{return e}},set:r=>{try{window.localStorage.setItem(t,r)}catch{}}}}let P="";const _t=Re("goose__githubToken","");function rt(){var n;if(P)return P;const t=(n=Tt(window.location.href))==null?void 0:n.token;if(t)return P=t,t;const e=_t.get();return e?(P=e,e):""}function Be(t){_t.set(t),P=t}const Fe="_settings_cbtaj_1",Le="_header_cbtaj_12",We="_actions_cbtaj_21",Xe="_btn_cbtaj_26",Ke="_close_cbtaj_36",qe="_danger_cbtaj_41",De="_content_cbtaj_44",Ue="_label_cbtaj_61",He="_value_cbtaj_64",ze="_tip_cbtaj_67",Ye="_section_cbtaj_73",Je="_modal_cbtaj_79",Qe="_selects_cbtaj_83",Ze={settings:Fe,header:Le,actions:We,btn:Xe,close:Ke,danger:qe,content:De,"setting-item":"_setting-item_cbtaj_48","setting-item-main":"_setting-item-main_cbtaj_56",label:Ue,value:He,tip:ze,section:Ye,modal:Je,"selects-title":"_selects-title_cbtaj_83",selects:Qe,"select-option":"_select-option_cbtaj_92","token-modal":"_token-modal_cbtaj_104","token-input":"_token-input_cbtaj_104","ok-btn":"_ok-btn_cbtaj_108"},f=Se.bind(Ze);function it({label:t,value:e,onClick:n,tip:o}){return _("div",{className:f("setting-item"),onClick:n,children:[_("div",{className:f("setting-item-main"),children:[s("div",{className:f("label"),children:t}),s("div",{className:f("value"),children:e})]}),!!o&&s("div",{className:f("tip"),children:o})]})}function Ve({onDestory:t}){const e=z(()=>{window.location.reload()}),n=z(()=>{async function o(){const r=document.getElementById("goose__token-input"),i=(r==null?void 0:r.value)||"";if(!i){O.info("请输入 Github Token");return}Be(i),O.info("保存成功，即将自动刷新"),await $e(1e3),e()}y.show({maskClosable:!0,title:"Github Token",type:"custom",content:()=>_("div",{className:f("token-modal"),children:[s("input",{id:"goose__token-input",className:f("g-input-style","token-input"),type:"text",placeholder:"请输入 Github Token"}),s("div",{className:f("ok-btn"),onClick:o,children:"保存"})]})})});return _("div",{className:f("settings"),children:[s("div",{className:f("header"),children:s("div",{className:f("actions"),children:s("div",{className:f("btn","close"),onClick:t,children:"关闭"})})}),_("div",{className:f("content"),children:[s("div",{className:f("section"),children:"应用"}),s(it,{label:"刷新",value:"",onClick:e}),s(it,{label:"Github Token",value:rt()?"****"+rt().slice(-4):"空",onClick:n})]})]})}function tn(){return x.show({content:t=>s(Ve,{onDestory:t})})}const nn=Object.freeze(Object.defineProperty({__proto__:null,showSettings:tn},Symbol.toStringTag,{value:"Module"}));export{Se as c,rt as g,nn as i,tn as s,z as u};
