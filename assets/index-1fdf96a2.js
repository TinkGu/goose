import{c as A,g as H,r as v,R as q,a as s,F as X,j as _,q as ht}from"./index-db41463b.js";function _t(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var rt=_t,pt=typeof A=="object"&&A&&A.Object===Object&&A,yt=pt,jt=yt,Tt=typeof self=="object"&&self&&self.Object===Object&&self,$t=jt||Tt||Function("return this")(),ot=$t,wt=ot,xt=function(){return wt.Date.now()},St=xt,Nt=/\s/;function kt(t){for(var e=t.length;e--&&Nt.test(t.charAt(e)););return e}var Ot=kt,Pt=Ot,Et=/^\s+/;function It(t){return t&&t.slice(0,Pt(t)+1).replace(Et,"")}var Ct=It,Gt=ot,Mt=Gt.Symbol,it=Mt,J=it,st=Object.prototype,At=st.hasOwnProperty,Bt=st.toString,E=J?J.toStringTag:void 0;function Rt(t){var e=At.call(t,E),n=t[E];try{t[E]=void 0;var r=!0}catch{}var o=Bt.call(t);return r&&(e?t[E]=n:delete t[E]),o}var Ft=Rt,Lt=Object.prototype,Wt=Lt.toString;function qt(t){return Wt.call(t)}var Ut=qt,K=it,zt=Ft,Dt=Ut,Ht="[object Null]",Xt="[object Undefined]",Q=K?K.toStringTag:void 0;function Jt(t){return t==null?t===void 0?Xt:Ht:Q&&Q in Object(t)?zt(t):Dt(t)}var Kt=Jt;function Qt(t){return t!=null&&typeof t=="object"}var Yt=Qt,Zt=Kt,Vt=Yt,te="[object Symbol]";function ee(t){return typeof t=="symbol"||Vt(t)&&Zt(t)==te}var ne=ee,re=Ct,Y=rt,oe=ne,Z=0/0,ie=/^[-+]0x[0-9a-f]+$/i,se=/^0b[01]+$/i,ae=/^0o[0-7]+$/i,ce=parseInt;function le(t){if(typeof t=="number")return t;if(oe(t))return Z;if(Y(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Y(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=re(t);var n=se.test(t);return n||ae.test(t)?ce(t.slice(2),n?2:8):ie.test(t)?Z:+t}var ue=le,fe=rt,L=St,V=ue,de="Expected a function",me=Math.max,be=Math.min;function ve(t,e,n){var r,o,i,a,c,u,f=0,C=!1,p=!1,O=!0;if(typeof t!="function")throw new TypeError(de);e=V(e)||0,fe(n)&&(C=!!n.leading,p="maxWait"in n,i=p?me(V(n.maxWait)||0,e):i,O="trailing"in n?!!n.trailing:O);function j(l){var g=r,T=o;return r=o=void 0,f=l,a=t.apply(T,g),a}function G(l){return f=l,c=setTimeout($,e),C?j(l):a}function F(l){var g=l-u,T=l-f,h=e-g;return p?be(h,i-T):h}function M(l){var g=l-u,T=l-f;return u===void 0||g>=e||g<0||p&&T>=i}function $(){var l=L();if(M(l))return w(l);c=setTimeout($,F(l))}function w(l){return c=void 0,O&&r?j(l):(r=o=void 0,a)}function P(){c!==void 0&&clearTimeout(c),f=0,r=u=o=c=void 0}function x(){return c===void 0?a:w(L())}function y(){var l=L(),g=M(l);if(r=arguments,o=this,u=l,g){if(c===void 0)return G(u);if(p)return clearTimeout(c),c=setTimeout($,e),j(u)}return c===void 0&&(c=setTimeout($,e)),a}return y.cancel=P,y.flush=x,y}var ge=ve;const he=H(ge);var U=globalThis&&globalThis.__assign||function(){return U=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},U.apply(this,arguments)},_e=function(t,e,n){return he(t,e,U({leading:!0,trailing:!1},n||{}))};function z(t,e,n){e===void 0&&(e=1e3);var r=v.useRef(t);r.current=t;var o=v.useMemo(function(){return _e(function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.current.apply(r,i)},e,n)},[]);return v.useEffect(function(){return function(){o.cancel()}},[]),o}function pe(t,e,n){return n===void 0&&(n=!0),z(t,e,n?{leading:!0,trailing:!1}:{leading:!1,trailing:!0})}var at={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var a=typeof i;if(a==="string"||a==="number")r.push(this&&this[i]||i);else if(Array.isArray(i))r.push(n.apply(this,i));else if(a==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var c in i)e.call(i,c)&&i[c]&&r.push(this&&this[c]||c)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(at);var ye=at.exports;const je=H(ye);function Te(t){return new Promise(function(e){window.setTimeout(e,t)})}function $e(t,e){var n,r=e||"出错了，请稍候重试";if(t!=null&&t.isAxiosError){var o=(n=t==null?void 0:t.response)===null||n===void 0?void 0:n.data;return(o==null?void 0:o.message)||(o==null?void 0:o.msg)||r}return t!=null&&t.errorFields?(t==null?void 0:t.message)||"请验证表单项是否输入正确":(t==null?void 0:t.message)||(t==null?void 0:t.msg)||r}var ct={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var r=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var a=typeof i;if(a==="string"||a==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var c=n.apply(null,i);c&&r.push(c)}}else if(a==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){r.push(i.toString());continue}for(var u in i)e.call(i,u)&&i[u]&&r.push(u)}}}return r.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(ct);var we=ct.exports;const b=H(we),lt=()=>null;function ut(){return document?document.createElement("div"):null}function ft({children:t=null,onDestroy:e=lt}){return typeof t=="function"?s(X,{children:t(e)}):s(X,{children:t})}function N(t){const e=v.useRef(null);return e.current||(e.current=ut()),v.useEffect(()=>{const n=document.body;return n&&e.current&&n.appendChild(e.current),()=>{e.current&&(e.current.remove&&e.current.remove(),e.current=null)}},[]),e.current?q.createPortal(s(ft,{...t}),e.current):null}N.show=t=>{t=t||{},t.children=t.content;let e=ut();const n=document.body,r=()=>{if(typeof t.onDestroy=="function"&&t.onDestroy(),e){q.unmountComponentAtNode(e);try{e.remove&&e.remove()}catch(o){console.error("portal remove error",o)}}e=null};return e&&q.render(s(ft,{...t,onDestroy:r}),n.appendChild(e)),r};const dt=t=>()=>{let e=null;const n=()=>{typeof e=="function"&&(e(),e=null)};return{show:o=>{n(),e=t(o||{})},destroy:n}};N.create=dt(N.show);function mt(t,e={}){function n(r){return s(N,{onDestroy:r.onDestroy||lt,children:o=>s(t,{onDestroy:o,...r})})}return n.show=r=>(r=Object.assign({},e,r),r.children=r.children||r.content,N.show({onDestroy:r.onDestroy,content:o=>s(t,{...r,onDestroy:o})})),n.create=dt(n.show),n}const S="mg-popup",xe=()=>null,Se={};function bt({visible:t=!0,onDestroy:e,wrapperClassName:n="",className:r="",mask:o=!0,maskClosable:i=!1,children:a=null,nonePointerEvents:c,style:u=Se,position:f="top"}){return t?_("div",{className:b(S,n,{[`${S}-pass`]:!!c,[`${S}-center`]:f==="center",[`${S}-bottom`]:f==="bottom"}),children:[!!o&&s("div",{className:b(`${S}-mask`),onClick:i?e:xe}),s("div",{className:b(`${S}-inner`,r),style:u,children:typeof a=="function"?a(e):a})]}):null}const Ne=mt(bt);const B="mg-toast";let R,vt;const tt=()=>{R&&(clearTimeout(vt),R(),R=null)};function k({message:t,wait:e=3e3,mask:n=!1,position:r="center",nowrap:o}){tt();const i=o?`${B}-msg-nowrap`:"",a=Ne.show({position:r,mask:n,nonePointerEvents:!0,wrapperClassName:`${B}-wrapper`,className:b(B,r==="top"&&`${B}-top`),content:()=>typeof t=="string"?s("p",{className:i,children:t}):Array.isArray(t)?t.map((c,u)=>s("p",{className:i,children:c},u)):t||null});return vt=setTimeout(a,e),R=a,tt}k.info=t=>k({message:t});k.error=(t,e)=>k({message:$e(t)||e||"出错了"});const W="mg-circle-loading",ke=v.memo(({className:t,size:e,theme:n,color:r})=>{const o=v.useMemo(()=>({stroke:r||""}),[r]);return s("div",{className:b(W,e,n,t),children:s("svg",{className:b(`${W}-svg`),viewBox:"0 0 32 32",children:s("circle",{className:`${W}-c`,cx:"16",cy:"16",r:"15",style:o})})})});const Oe=v.memo(({className:t})=>s("div",{className:b("mg-icon-warning",t)}));const d="mg-modal";function Pe(t,e,n){let r,o;return t==="info"&&(r="我知道了"),t==="confirm"&&(r="确定",o="取消"),r=e||r,o=n||o,[r,o]}const Ee=v.memo(function({className:e,type:n,title:r,children:o,okText:i,cancelText:a,onOk:c,onCancel:u,onDestroy:f,warning:C,position:p="center",wrapperClassName:O,icon:j,disabled:G,debounceWait:F,debounceImmediate:M=!0,...$}){const[w,P]=v.useState(!1),[x,y]=Pe(n,i,a),l=!!(x||y),g=pe(async()=>{try{if(w||G)return;const h=c==null?void 0:c();h!=null&&h.then&&typeof h.then=="function"&&(P(!0),await h,P(!1)),f==null||f()}catch(h){console.error(h),P(!1)}},F,M),T=v.useCallback(()=>{u==null||u(),f==null||f()},[u,f]);return s(bt,{wrapperClassName:b(d,{[`${d}-halfscreen`]:p==="bottom"},O),position:p,onDestroy:f,...$,children:_("div",{className:b(`${d}-wrapper`),children:[_("div",{className:b(`${d}-body`),children:[!!C&&!j&&s(Oe,{}),!!j&&j,!!r&&s("div",{className:`${d}-title`,children:r}),!!o&&s("div",{className:b(`${d}-inner`,e),children:typeof o=="function"?o(f):o})]}),l&&_("div",{className:b(`${d}-bottom`,{[`${d}-btns-both`]:!!(x&&y)}),children:[!!y&&s("div",{className:b(`${d}-btn`,`${d}-btn-cancel`),onClick:T,children:y}),!!x&&_("div",{className:b(`${d}-btn`,`${d}-btn-ok`,{[`${d}-btn-disabled`]:w||G}),onClick:g,children:[w?s(ke,{className:`${d}-btn-loading`}):null,x]})]})]})})}),D=mt(Ee);D.confirm=t=>new Promise(e=>{D.show({type:"confirm",...t,onOk:()=>e(!0),onCancel:()=>e(!1)})});function Ie(t,e){return{get:()=>{try{return window.localStorage.getItem(t)??e}catch{return e}},set:o=>{try{window.localStorage.setItem(t,o)}catch{}}}}let I="";const gt=Ie("goose__githubToken","");function et(){var n;if(I)return I;const t=(n=ht(window.location.href))==null?void 0:n.token;if(t)return I=t,t;const e=gt.get();return e?(I=e,e):""}function Ce(t){gt.set(t),I=t}const Ge="_settings_cbtaj_1",Me="_header_cbtaj_12",Ae="_actions_cbtaj_21",Be="_btn_cbtaj_26",Re="_close_cbtaj_36",Fe="_danger_cbtaj_41",Le="_content_cbtaj_44",We="_label_cbtaj_61",qe="_value_cbtaj_64",Ue="_tip_cbtaj_67",ze="_section_cbtaj_73",De="_modal_cbtaj_79",He="_selects_cbtaj_83",Xe={settings:Ge,header:Me,actions:Ae,btn:Be,close:Re,danger:Fe,content:Le,"setting-item":"_setting-item_cbtaj_48","setting-item-main":"_setting-item-main_cbtaj_56",label:We,value:qe,tip:Ue,section:ze,modal:De,"selects-title":"_selects-title_cbtaj_83",selects:He,"select-option":"_select-option_cbtaj_92","token-modal":"_token-modal_cbtaj_104","token-input":"_token-input_cbtaj_104","ok-btn":"_ok-btn_cbtaj_108"},m=je.bind(Xe);function nt({label:t,value:e,onClick:n,tip:r}){return _("div",{className:m("setting-item"),onClick:n,children:[_("div",{className:m("setting-item-main"),children:[s("div",{className:m("label"),children:t}),s("div",{className:m("value"),children:e})]}),!!r&&s("div",{className:m("tip"),children:r})]})}function Je({onDestory:t}){const e=z(()=>{window.location.reload()}),n=z(()=>{async function r(){const o=document.getElementById("goose__token-input"),i=(o==null?void 0:o.value)||"";if(!i){k.info("请输入 Github Token");return}Ce(i),k.info("保存成功，即将自动刷新"),await Te(1e3),e()}D.show({maskClosable:!0,title:"Github Token",type:"custom",content:()=>_("div",{className:m("token-modal"),children:[s("input",{id:"goose__token-input",className:m("g-input-style","token-input"),type:"text",placeholder:"请输入 Github Token"}),s("div",{className:m("ok-btn"),onClick:r,children:"保存"})]})})});return _("div",{className:m("settings"),children:[s("div",{className:m("header"),children:s("div",{className:m("actions"),children:s("div",{className:m("btn","close"),onClick:t,children:"关闭"})})}),_("div",{className:m("content"),children:[s("div",{className:m("section"),children:"应用"}),s(nt,{label:"刷新",value:"",onClick:e}),s(nt,{label:"Github Token",value:et()?"****"+et().slice(-4):"空",onClick:n})]})]})}function Ke(){return N.show({content:t=>s(Je,{onDestory:t})})}const Ye=Object.freeze(Object.defineProperty({__proto__:null,showSettings:Ke},Symbol.toStringTag,{value:"Module"}));export{D as M,N as P,Oe as W,Ne as a,je as c,Te as d,et as g,Ye as i,Ke as s,k as t,z as u};
